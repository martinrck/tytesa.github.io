/* =========================================
   DICCIONARIO DE TRADUCCIONES
   ========================================= */
const translations = {
    es: {
        subtitle: "Energía y Automatización",
        nav_home: "Inicio",
        nav_about: "Sobre Nosotros",
        nav_services: "Servicios",
        srv_eng: "Ingeniería y Automatización",
        srv_panels: "Fabricación y Montaje de Cuadros",
        srv_projects: "Obras y Proyectos",
        srv_maintenance: "Mantenimiento",
        nav_contact: "Contáctanos",
        
        // Hero
        hero1_tag: "Ingeniería de Precisión",
        hero1_title: "SOLUCIONES <br> ELÉCTRICAS",
        hero1_desc: "Líderes en montaje industrial y media tensión.",
        hero1_btn: "Ver Soluciones",
        hero2_tag: "Infraestructura Crítica",
        hero2_title: "POTENCIA Y <br> SEGURIDAD",
        hero2_desc: "Proyectos llave en mano para grandes industrias.",
        hero2_btn: "Nuestros Proyectos",
        hero3_tag: "Industria 4.0",
        hero3_title: "CONTROL <br> INTELIGENTE",
        hero3_desc: "Automatización y sistemas SCADA de última generación.",
        hero3_btn: "Ver Tecnología",

        // About
        about_tag: "Trayectoria y Excelencia",
        about_title: "SOBRE",
        about_title_span: "NOSOTROS",
        about_highlight: "\"TYTESA es una empresa desarrollada en 2007. Nos avalan más de 15 años de experiencia en el rubro energía y automatización industrial.\"",
        about_p1: "Nuestra presencia en <strong>Argentina y España</strong> es una muestra de nuestro esfuerzo, crecimiento y desarrollo. Hoy, TYTESA es una empresa de servicios consolidada. Nuestro sostén es un grupo de técnicos especializados y distribuidos en nuestras oficinas y talleres en Madrid y Buenos Aires.",
        about_p2: "Nuestro know-how en control y distribución de energía nos permite integrarnos a proveedores de reconocimiento global para ofrecer una amplia demanda de servicios de manera autónoma fuertemente orientada a la industria. Nuestra cartera de clientes es sólida y reconocida, atendiendo sus necesidades mediante proyectos llave en mano, obras, montajes y mantenimiento.",
        founder_title: "LIDERAZGO",
        founder_role: "Director General",
        founder_bio: "Fundador y actual Director General de TYTESA Argentina y TYTESA España.",
        edu_1_title: "Técnico Eléctrico",
        edu_1_inst: "Instituto Tecnológico San Bonifacio (ARG)",
        edu_2_title: "Licenciado en Comercialización",
        edu_2_inst: "Universidad Abierta Interamericana (ARG)",

        // Hub
        hub_tag: "Catálogo de Soluciones",
        hub_title: "NUESTROS",
        hub_title_span: "SERVICIOS",
        hub_desc: "Seleccione una categoría para acceder a la especificación técnica, galerías y detalles operativos.",
        hub_eng_desc: "Análisis y relevamiento. Diseño y desarrollo de ingeniería de soluciones en energía y automatización. Programación de PLC, HMI y SCADA.",
        hub_panels_desc: "Montaje de cuadros de energía y control. CGBT, CCM y cuadros seccionales de distribución. Talleres propios en Argentina y España.",
        hub_projects_desc: "Soluciones llave en mano. Integración de cuadros, tecnologías y sistemas de producción. Servicios de montajes eléctricos y electromecánicos.",
        hub_maint_desc: "Mantenimiento preventivo y correctivo. Termografías y contratos de externalización para asegurar la continuidad operativa.",
        hub_cta: "Acceder al Módulo →",

        // Detalles
        back_btn: "← Volver al Menú",
        eng_title_1: "INGENIERÍA Y",
        eng_title_2: "AUTOMATIZACIÓN",
        eng_desc: "Desarrollo integral de la inteligencia operativa de su planta.",
        tech_details: "Detalles Técnicos",
        eng_card1_title: "Programación de PLCs",
        eng_card1_text: "Siemens, Allen Bradley, Schneider.",
        eng_card2_title: "Sistemas HMI y SCADA",
        eng_card2_text: "Interfaz hombre-máquina y monitoreo.",
        eng_card3_title: "Migración de Sistemas",
        eng_card3_text: "Actualización de hardware obsoleto.",
        eng_card4_title: "Telemetría y Control",
        eng_card4_text: "Operación remota y adquisición de datos.",

        pan_title_1: "FABRICACIÓN Y MONTAJE DE",
        pan_title_2: "CUADROS",
        pan_desc: "Certificación y calidad en cada tablero ensamblado en nuestros talleres propios.",
        pan_types: "Tipos de Tableros",
        pan_card1_text: "Tableros Generales de Baja Tensión de alta potencia.",
        pan_card2_text: "Centros de Control de Motores fijos y extraíbles.",
        pan_card3_title: "Bancos de Capacitores",
        pan_card3_text: "Corrección de factor de potencia automáticos.",
        pan_card4_title: "Seccionales",
        pan_card4_text: "Tableros de iluminación y distribución secundaria.",

        proj_title_1: "OBRAS Y",
        proj_title_2: "PROYECTOS",
        proj_desc: "Ejecución llave en mano de grandes obras de infraestructura industrial.",
        proj_scope: "Alcance del Servicio",
        proj_card1_title: "Montajes",
        proj_card1_text: "Bandejas portacables, cañerías y soportería.",
        proj_card2_title: "Tendidos Eléctricos",
        proj_card2_text: "Cables de potencia y comando de gran calibre.",
        proj_card3_title: "Iluminación Industrial",
        proj_card3_text: "Proyectos lumínicos LED para naves y plantas.",
        proj_card4_title: "Protección",
        proj_card4_text: "Sistemas de pararrayos y Puesta a Tierra (PAT).",

        main_title_1: "SERVICIO DE",
        main_title_2: "MANTENIMIENTO",
        main_desc: "Aseguramos la máxima disponibilidad de sus activos eléctricos.",
        main_specs: "Servicios Especializados",
        main_card1_title: "Termografías",
        main_card1_text: "Detección de puntos calientes mediante infrarrojo.",
        main_card2_title: "Calidad de Energía",
        main_card2_text: "Análisis de redes y armónicos.",
        main_card3_title: "Guardia 24/7",
        main_card3_text: "Respuesta inmediata ante emergencias técnicas.",
        main_card4_title: "Mediciones SRT",
        main_card4_text: "Protocolos de puesta a tierra certificados.",

        // Contacto
        contact_tag: "Presencia Global",
        contact_title: "CONTACTO",
        contact_title_span: "INTERNACIONAL",
        contact_desc: "Seleccione la sede más cercana o envíenos su consulta directa.",
        country_arg: "ARGENTINA",
        country_esp: "ESPAÑA",
        form_title: "Envíenos un mensaje",
        form_subtitle: "Responderemos en menos de 24hs.",
        form_name: "Nombre y Apellido",
        form_company: "Empresa",
        form_email: "Correo Electrónico",
        form_phone: "Teléfono",
        form_subject: "Asunto",
        form_message: "Mensaje",
        form_btn: "Enviar Mensaje",
        footer_text: "© 2024 TYTESA - Soluciones Industriales."
    },
    en: {
        subtitle: "Energy & Automation",
        nav_home: "Home",
        nav_about: "About Us",
        nav_services: "Services",
        srv_eng: "Engineering & Automation",
        srv_panels: "Panel Manufacturing & Assembly",
        srv_projects: "Works & Projects",
        srv_maintenance: "Maintenance",
        nav_contact: "Contact Us",
        
        // Hero
        hero1_tag: "Precision Engineering",
        hero1_title: "ELECTRICAL <br> SOLUTIONS",
        hero1_desc: "Leaders in industrial assembly and medium voltage.",
        hero1_btn: "See Solutions",
        hero2_tag: "Critical Infrastructure",
        hero2_title: "POWER & <br> SAFETY",
        hero2_desc: "Turnkey projects for large industries.",
        hero2_btn: "Our Projects",
        hero3_tag: "Industry 4.0",
        hero3_title: "INTELLIGENT <br> CONTROL",
        hero3_desc: "State-of-the-art automation and SCADA systems.",
        hero3_btn: "See Technology",

        // About
        about_tag: "Trajectory & Excellence",
        about_title: "ABOUT",
        about_title_span: "US",
        about_highlight: "\"TYTESA was developed in 2007. We have over 15 years of experience in the energy and industrial automation sector.\"",
        about_p1: "Our presence in <strong>Argentina and Spain</strong> is a sign of our effort, growth, and development. Today, TYTESA is a consolidated service company. Our support is a group of specialized technicians distributed in our offices and workshops in Madrid and Buenos Aires.",
        about_p2: "Our know-how in energy control and distribution allows us to integrate with globally recognized providers to offer a wide demand of services autonomously, strongly oriented towards the industry. Our client portfolio is solid and recognized, meeting their needs through turnkey projects, works, assemblies, and maintenance.",
        founder_title: "LEADERSHIP",
        founder_role: "General Director",
        founder_bio: "Founder and current General Director of TYTESA Argentina and TYTESA Spain.",
        edu_1_title: "Electrical Technician",
        edu_1_inst: "San Bonifacio Technological Institute (ARG)",
        edu_2_title: "Bachelor in Marketing",
        edu_2_inst: "Open Interamerican University (ARG)",

        // Hub
        hub_tag: "Solutions Catalog",
        hub_title: "OUR",
        hub_title_span: "SERVICES",
        hub_desc: "Select a category to access technical specifications, galleries, and operational details.",
        hub_eng_desc: "Analysis and survey. Design and development of engineering solutions in energy and automation. PLC, HMI, and SCADA programming.",
        hub_panels_desc: "Assembly of energy and control panels. TGBT, MCC, and distribution panels. Own workshops in Argentina and Spain.",
        hub_projects_desc: "Turnkey solutions. Integration of panels, technologies, and production systems. Electrical and electromechanical assembly services.",
        hub_maint_desc: "Preventive and corrective maintenance. Thermography and outsourcing contracts to ensure operational continuity.",
        hub_cta: "Access Module →",

        // Detalles
        back_btn: "← Back to Menu",
        eng_title_1: "ENGINEERING &",
        eng_title_2: "AUTOMATION",
        eng_desc: "Integral development of your plant's operational intelligence.",
        tech_details: "Technical Details",
        eng_card1_title: "PLC Programming",
        eng_card1_text: "Siemens, Allen Bradley, Schneider.",
        eng_card2_title: "HMI & SCADA Systems",
        eng_card2_text: "Human-machine interface and monitoring.",
        eng_card3_title: "System Migration",
        eng_card3_text: "Update of obsolete hardware.",
        eng_card4_title: "Telemetry & Control",
        eng_card4_text: "Remote operation and data acquisition.",

        pan_title_1: "PANEL MANUFACTURING &",
        pan_title_2: "ASSEMBLY",
        pan_desc: "Certification and quality in every panel assembled in our own workshops.",
        pan_types: "Panel Types",
        pan_card1_text: "General Low Voltage Boards (high power).",
        pan_card2_text: "Motor Control Centers (fixed and withdrawable).",
        pan_card3_title: "Capacitor Banks",
        pan_card3_text: "Automatic power factor correction.",
        pan_card4_title: "Sectional Boards",
        pan_card4_text: "Lighting and secondary distribution panels.",

        proj_title_1: "WORKS &",
        proj_title_2: "PROJECTS",
        proj_desc: "Turnkey execution of large industrial infrastructure works.",
        proj_scope: "Service Scope",
        proj_card1_title: "Assemblies",
        proj_card1_text: "Cable trays, piping, and supports.",
        proj_card2_title: "Electrical Wiring",
        proj_card2_text: "Large gauge power and command cables.",
        proj_card3_title: "Industrial Lighting",
        proj_card3_text: "LED lighting projects for warehouses and plants.",
        proj_card4_title: "Protection",
        proj_card4_text: "Lightning rod systems and Grounding (PAT).",

        main_title_1: "MAINTENANCE",
        main_title_2: "SERVICE",
        main_desc: "We ensure maximum availability of your electrical assets.",
        main_specs: "Specialized Services",
        main_card1_title: "Thermography",
        main_card1_text: "Hotspot detection via infrared.",
        main_card2_title: "Power Quality",
        main_card2_text: "Network and harmonic analysis.",
        main_card3_title: "24/7 Guard",
        main_card3_text: "Immediate response to technical emergencies.",
        main_card4_title: "SRT Measurements",
        main_card4_text: "Certified grounding protocols.",

        // Contacto
        contact_tag: "Global Presence",
        contact_title: "INTERNATIONAL",
        contact_title_span: "CONTACT",
        contact_desc: "Select the nearest headquarters or send us your direct inquiry.",
        country_arg: "ARGENTINA",
        country_esp: "SPAIN",
        form_title: "Send us a message",
        form_subtitle: "We will reply in less than 24hs.",
        form_name: "Name and Surname",
        form_company: "Company",
        form_email: "Email Address",
        form_phone: "Phone",
        form_subject: "Subject",
        form_message: "Message",
        form_btn: "Send Message",
        footer_text: "© 2024 TYTESA - Industrial Solutions."
    }
};

/* --- LÓGICA DE IDIOMA --- */
function changeLanguage(lang) {
    // 1. Actualizar textos
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            // Si es un input con placeholder, cambiar placeholder
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
               // Para labels flotantes no tocamos el placeholder, tocamos el label asociado
            } else {
               // Si tiene HTML dentro (como <br>), usamos innerHTML
               element.innerHTML = translations[lang][key];
            }
        }
    });

    // 2. Actualizar Labels de formulario explícitamente
    document.querySelector('label[for="nombre"]').textContent = translations[lang].form_name;
    document.querySelector('label[for="empresa"]').textContent = translations[lang].form_company;
    document.querySelector('label[for="email"]').textContent = translations[lang].form_email;
    document.querySelector('label[for="telefono"]').textContent = translations[lang].form_phone;
    document.querySelector('label[for="asunto"]').textContent = translations[lang].form_subject;
    document.querySelector('label[for="mensaje"]').textContent = translations[lang].form_message;

    // 3. Estilo visual de botones
    document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector(`.lang-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');
}


/* --- LOADER CON RETRASO --- */
window.addEventListener('load', () => {
    const loader = document.getElementById('loader-wrapper');
    if (loader) {
        setTimeout(() => {
            loader.style.opacity = '0'; 
            setTimeout(() => {
                loader.style.display = 'none';
            }, 500);
        }, 1300);
    }
});

/* --- MENÚ MÓVIL --- */
const hamburger = document.querySelector('.hamburger');
const navLinks = document.querySelector('.nav-links');
const navItems = document.querySelectorAll('.nav-links a');

hamburger.addEventListener('click', () => { navLinks.classList.toggle('active'); });
navItems.forEach(item => {
    item.addEventListener('click', () => {
        if (window.innerWidth <= 900) { navLinks.classList.remove('active'); }
    });
});

/* --- GESTIÓN DE TEMA (DARK/LIGHT) --- */
const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
const currentTheme = localStorage.getItem('theme');

if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);
    if (currentTheme === 'light') { toggleSwitch.checked = true; }
}

function switchTheme(e) {
    if (e.target.checked) {
        document.documentElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
    } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
    }
}
toggleSwitch.addEventListener('change', switchTheme, false);

/* --- NAVEGACIÓN SPA --- */
function switchView(viewId) {
    const allViews = document.querySelectorAll('.view-section');
    allViews.forEach(view => {
        view.classList.remove('active-view');
        view.style.display = 'none'; 
    });
    const targetView = document.getElementById(viewId);
    if (targetView) {
        targetView.style.display = 'block';
        setTimeout(() => { targetView.classList.add('active-view'); }, 10);
    }
    window.scrollTo(0, 0);
}

/* --- CARRUSEL --- */
let currentSlide = 0;
const slides = document.querySelectorAll('.slide');
const totalSlides = slides.length;
function showSlide(index) {
    slides.forEach(slide => {
        slide.classList.remove('active');
        slide.style.opacity = '0';
        slide.style.zIndex = '0';
    });
    if (index >= totalSlides) currentSlide = 0;
    else if (index < 0) currentSlide = totalSlides - 1;
    else currentSlide = index;
    const activeSlide = slides[currentSlide];
    activeSlide.classList.add('active');
    activeSlide.style.opacity = '1';
    activeSlide.style.zIndex = '1';
}
function moveSlide(direction) { showSlide(currentSlide + direction); }
if (totalSlides > 0) { showSlide(0); setInterval(() => { moveSlide(1); }, 6000); }
